
# 공개 범위에 따른 블록체인

블록체인은 활용되는 목적 또는 공개 범위에 따라 다양한 방법으로 블록체인 네트워크를 구축할 수 있고, 그 종류에 따라 `퍼블릭 블록체인(Public Blockchain)`, `프라이빗 블록체인(Private Blockchain)` 그리고 `컨소시엄 블록체인(Consortium Blockchain)`으로 나눌 수 있습니다.

  

퍼블릭 블록체인(Public Blockchain)
---------------------------

`퍼블릭 블록체인(Public Blockchain)`은 개방형 블록체인으로 누구나 `트랜잭션(Transaction)`을 생성할 수 있는 블록체인입니다. 일반적으로 블록체인이라 하면 이 퍼블릭 블록체인을 지칭합니다. 퍼블릭 블록체인은 트랜잭션 내역이 모두에게 공개되어 네트워크에 참여한 모든 `노드(Node)`가 이를 상호검증하고 거래를 승인하기 때문에 신뢰도가 높다는 장점이 있습니다. 하지만 모든 참여자의 거래 기록을 남기고 이를 공유하느라 처리 속도가 느리다는 단점이 있습니다.

> `트랜잭션(Transaction)`과 `노드(Node)`는 다음 챕터에서 설명합니다. 지금은 퍼블릭 블록체인(Public Blockchain)의 작동 방식에 초점을 맞추기 바랍니다.

프라이빗 블록체인(Private Blockchain)
-----------------------------

`프라이빗 블록체인(Private Blockchain)`은 `폐쇄형` 블록체인으로 퍼블릭 블록체인의 상대적 개념입니다. 프라이빗 블록체인은 서비스 제공자(기업 또는 기관)의 승인을 받아야만 참여할 수 있으며, 주로 기업에서 활용하여 엔터프라이즈 블록체인(Enterprise Blockchain)이라고도 합니다. 리눅스재단이 이끌고 있는 오픈소스 블록체인 프로젝트인 `하이퍼레저(Hyperledger)` 역시 프라이빗 블록체인으로 분류됩니다. 하이퍼레저(Hyperledger)는 스마트 계약을 구현할 수 있는 오픈소스 기반의 프라이빗 블록체인 플랫폼으로 기업 비즈니스를 구현하기에 적합한 환경이지만, 우리가 일반적으로 알고있는 퍼블릭 블록체인(Public Blockchain)의 탈중앙화와는 다르게 `중앙화`된 플랫폼 이라는 특징이 있습니다.

컨소시엄 블록체인(Consortium Blockchain)
--------------------------------

`컨소시엄 블록체인(Consortium Blockchain)`이란 동일한 목적이나 가치를 가지고 있는 다수의 기업과 단체들이 하나의 컨소시엄을 구성하고 그 안에서 작동하도록 만든 블록체인입니다. 대표적으로 리눅스재단이 주도하고 IBM 등이 참여해서 만든 [하이퍼레저 패브릭(hyperledger fabric)](http://wiki.hash.kr/index.php/%ED%95%98%EC%9D%B4%ED%8D%BC%EB%A0%88%EC%A0%80_%ED%8C%A8%EB%B8%8C%EB%A6%AD) 프로젝트가 있습니다. 넓은 의미에서 보면, 컨소시엄 블록체인은 프라이빗 블록체인의 한 형태로 볼 수 있기에, 이를 별도로 구별하여 `하이브리드 블록체인`으로 분류하기도 합니다. `컨소시엄 블록체인`은 하이브리드 블록체인이라는 말처럼 `퍼블릭 블록체인과 프라이빗 블록체인의 중간 형태`로, 중앙 관리자에 의해 승인받은 참여자만이 블록 생성에 참여할 수 있는 프라이빗 블록체인과 유사한 개념입니다. 프라이빗 블록체인과는 달리 같은 목적을 가지고 있는 여러 기관이 하나의 컨소시엄을 구성하여 공정성과 확장성을 보완하였습니다. 따라서 다수 참여자의 협의가 필요한 분야에서는 컨소시엄 블록체인이 프라이빗 블록체인보다 효과적입니다. 컨소시엄 블록체인을 이용하면 기관 간에 직접 거래함으로써 제3자에 대한 거래 수수료를 줄이고 거래 시간을 단축할 수 있습니다.

> `하이브리드 블록체인(hybrid blockchain)`이란 퍼블릭 블록체인과 프라이빗 블록체인을 서로 연결하거나 두 특징을 섞은 혼합형 블록체인을 말합니다. 기존의 퍼블릭 블록체인과 프라이빗 블록체인이 가지고 있는 단점은 보완하고 장점을 최대한으로 끌어올릴 수 있도록 한 블록체인 형태입니다.


<center><table><thead><tr><th style="text-align: center;">구분</th><th style="text-align: center;">퍼블릭 블록체인(Public Blockchain)</th><th style="text-align: center;">프라이빗 블록체인(Private Blockchain)</th><th style="text-align: center;">컨소시엄 블록체인(Consortium Blockchain)</th></tr></thead><tbody><tr><td style="text-align: center;">관리자</td><td style="text-align: center;">모든 거래 참여자</td><td style="text-align: center;">한 중앙 기관이 모든 권한 보유</td><td style="text-align: center;">컨소시엄에 소속된 참여자</td></tr><tr><td style="text-align: center;">거버넌스</td><td style="text-align: center;">한번 정해진 법칙을 바꾸기 매우 어려움</td><td style="text-align: center;">중앙 기관의 의사결정에 따라 용이하게 법칙을 바꿀 수 있음</td><td style="text-align: center;">컨소시엄 참여자들의 합의에 따라 법칙을 바꿀 수 있음</td></tr><tr><td style="text-align: center;">거래속도</td><td style="text-align: center;">네트워크 확장이 어렵고 거래 속도가 느림</td><td style="text-align: center;">네트워크 확장이 매우 쉽고 거래 속도가 빠름</td><td style="text-align: center;">네트워크 확장이 쉽고 거래 속도가 빠름</td></tr><tr><td style="text-align: center;">데이터 접근</td><td style="text-align: center;">누구나 접근 가능</td><td style="text-align: center;">허가 받은 사용자만 접근 가능</td><td style="text-align: center;">허가 받은 사용자만 접근 가능</td></tr><tr><td style="text-align: center;">식별성</td><td style="text-align: center;">익명성</td><td style="text-align: center;">식별 가능</td><td style="text-align: center;">식별 가능</td></tr></tbody></table></center>
  

Self Guided Lesson
------------------

### 세계은행그룹(World Bank Group)의 블록체인 구분

블록체인을 구분하는 방법은 다양합니다. 세계은행그룹(World Bank Group)이 구분하는 블록체인은 '무엇을 공개' 또는 '무엇을 허용'하는가가 중요합니다. 크게 읽기와 쓰기로 나눕니다.

![image](https://s3.ap-northeast-2.amazonaws.com/urclass-images/MCXFiCs1XJbkvqKEV1KHU-1636258121827.png) \[블록체인 심화&공개 범위에 따른 블록체인-그림.1\] 세계은행그룹의 블록체인 구분


# 분산원장 기능

\*{-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}

이번에는 **분산원장기술(DLT; Distributed Ledger Technology)**에 대해 알아보면서 중앙집중원장(Centralized Ledger)과의 차이를 통해 개념을 습득하게 됩니다.

  

분산원장기술(DLT; Distributed Ledger Technology)
------------------------------------------

**분산원장(Distributed Ledger)**은 **거래 정보를 기록한 원장을 특정 기관의 중앙화된 서버가 아닌 분산화된 네트워크에서 참여자들이 공동으로 기록 및 관리하는 기술**로 공유원장 또는 **분산원장기술**이라고 불리기도 합니다. 광범위하게 널리 분포되어 있음을 의미하는 분산(Distributed)과 거래내역이 기록된 장부를 의미하는 원장(Ledger)이 합쳐진 분산원장은 블록체인 기술의 핵심입니다.

  

기존의 여러 서비스는 중앙집중원장(Centralized Ledger)의 형태를 띄고 있습니다. 오늘날 여러 대기업에서 제공하는 서비스나 은행시스템을 이용할 수 있었던 것은 그들이 알아서 잘 관리하고 처리해줄 것이라는 신뢰가 뒷받침되어 있기 때문입니다. 이러한 기관, 기업에게 신뢰비용(수수료 등)을 지불하고, 그들은 서비스를 제공하며 데이터를 보관(보안)하고 활용했습니다. 하지만 기존 중앙집중형 데이터베이스 관리시스템의 취약점을 알게 모르게 겪어 왔습니다.

### 중앙집중원장(Centralized Ledger)의 취약점

*   비용문제 제 3자인 중앙집중형 관리시스템은 거래자들 사이에서 **과도한 관리, 중개수수료를 청구**합니다. 중앙집중형 시스템은 데이터베이스를 유지, 관리하기 위해 많은 보안유지비용을 지출하며, 금융권의 경우 매년 천문학적인 돈을 보안인프라에 투자하기도 합니다. 그 비용은 모두 우리에게 부담되는 것과 마찬가지입니다.
    
    > **중앙집중형 관리 시스템의 과도한 관리, 중개수수료를 청구 사례** 원화의 해외송금은 지금까지 반드시 은행 등 금융회사를 거쳐야 했습니다. 하지만 외국환거래법이 개정되면서 비트코인을 활용하여 중개 수수료를 절감하게 되었습니다. ![image](https://s3.ap-northeast-2.amazonaws.com/urclass-images/ZjlsXOpc86k1cBFQrOuM8-1636259438190.jpeg) \[블록체인 심화&분산원장기술-그림.1\] 은행 해외송금과 비트코인 해외송금
    
*   시간문제 중앙집중형 관리시스템은 상호거래의 프로세스 전반에 많은 중간다리가 포함되어 있기에 시간과 비용 측면의 효율성이 떨어집니다. 은행의 경우 각 은행들의 데이터베이스를 통해 거래를 확인하고 청산하기까지 중앙은행과 금융결제원, 외환거래의 경우 더 많은 중간다리가 포함되어 있습니다. 해외물류의 경우도 마찬가지로 화주부터 트럭회사, 해운사, 심지어 보험사까지 많은 중간 이해관계자들이 존재할 수 있습니다. 이렇게 많은 미들맨(Middleman)들이 존재할 경우 프로세스 전반에 걸쳐 시간과 비용이 증가하여 효율성이 떨어집니다.
    
    > **주식대금 결제가 3일 걸리는 사례** 우리나라의 증권예탁결제제도는 3일 거래 방식(D+2)을 채택하고 있습니다. 쉽게 말해 주식을 팔면 그 날을 포함해 사흘째가 돼야 실제 돈이 들어온다는 것입니다. 예를 들어, 1만원에 샀던 주식 100주를 월요일에 매도(1만2000원)했다면, 120만원의 주식대금(수수료 포함)은 수요일이 되야 출금할 수 있습니다. 여기에 영업일 기준이므로 만약 수요일이 공휴일이라면 목요일이 되야 돈을 되찾을 수 있습니다. 3일 결제제도는 주식을 살 때나 팔 때 모두 적용됩니다.
    
*   보안문제 중앙집중형 데이터베이스를 이용하게되면 해커들의 공격대상은 오직 하나, 중앙 데이터베이스입니다. 아무리 보안유지에 힘을 쓴다 하더라도 해커는 중앙의 데이터베이스 하나만을 목표로 공격하게되고, 공격에 성공한다면 중앙에 있는 모든 데이터 보안이 뚫리게 됩니다.
    
    > **인터파크 해킹 사례로 보는 중앙집중형 데이터베이스의 보안문제** 2016년 인터파크 회원 1천만명의 개인정보가 유출된 사건이 있었습니다. 이 사건을 통해 동종 업계 현업 실무자들이나, 보안분석가들도 작정하고 덤비는 공격자를 막아내는 것은 사실상 불가능에 가깝다는 한계를 다시한번 인지하게 되었습니다. 미국에서도 오래시간 공을 들인 지능형 공격(APT 공격)에 소니픽처스와 백악관이 뚫리기도 했습니다. 중앙집중형 데이터베이스의 취약점을 잘 나타내는 사례라고 볼 수 있는데, 이를 **단일 실패점(Single Point of Failure)**이라고도 합니다. ![image](https://s3.ap-northeast-2.amazonaws.com/urclass-images/sQStVdF-VRXo7a4U8irsX-1636260587579.png) \[블록체인 심화&분산원장기술-그림.2\]단일 실패점의 여러 사례
    

### 분산원장기술의 장점

**분산원장기술의 장점**은 중앙 집중형 방식에 비해 **인증과 증명의 효율성, 시스템 안정성, 보안성, 투명성**입니다.  
기존 시스템의 경우 인증과 데이터 거래 증명을 위해 여러 중간 매개체 또는 인증기관이 필요했지만 분산원장은 사용자가 거래 내역을 직접 공유할 수 있는 시스템이라는 차별성을 가지게 됩니다.  
이러한 특성 때문에 중앙화된 시스템을 관리시 사용되는 비용이 줄어들고 거래 정보가 분산되어 저장되기 때문에 해킹 및 위조의 위험성도 낮아집니다.

  

\[블록체인 심화&분산원장기술-그림.3\] 중앙집중원장(Centralized ledger)과 분산원장(Distributed ledger)

  

### 개인 지갑 사이의 거래

분산원장기술의 장점으로 인해, 개인과 개인이 직접 거래할 수 있습니다. 중앙기관(은행 등)으로부터 벗어난 거래가 가능하다는 이야기입니다.

\[블록체인 심화&분산원장기술-그림.4\] 중앙집중원장(Centralized Ledger)과 분산원장(Distributed Ledger)

중앙기관으로부터 벗어나 화폐를 개인과 개인이 직접 거래할 수 있게되면, 해외송금에 걸리는 시간이나 비용이 획기적으로 단축됩니다.  
이로 인해 비용과 시간의 문제가 해결되고, 분산원장기술로 보안문제도 해결합니다.

분산원장기술로 인해 국내외의 물리적 거리나 시간에 구애받지 않고, 언제 어디서든지 거래 상대에게 송금할 수 있습니다.


# 트랜잭션

\*{-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}

트랜잭션(Transaction)
-----------------

블록체인(Blockchain)은 블록(Block) + 체인(Chain). 다시 말해, 블록들이 체인으로 연결되어 있는 구조입니다. 이 블록(Block)은 헤더(Header) + 바디(Body)로 이루어져 있고, 헤더(Header)는 **메타데이터**, 바디(Body)는 **트랜잭션들의 리스트**로 구성되어 있습니다.

블록은 거래의 기록 단위로 다수의 트랜잭션을 포함할 수 있습니다. 이때, 특정 블록을 기준으로 다음과 같은 점들을 생각해 볼 수 있습니다.

*   이 블록은 체인 중 몇 번째 블록인지
*   이 블록에 몇 개의 트랜잭션이 있는지
*   이 블록을 생성은 누가 했는지
*   이 블록의 크기, 총 전송량 등은 얼마인지  
    이런 정보들을 메타데이터라고 합니다. 블록이라는 데이터를 설명하는 데이터이기 때문입니다. 참고로 트랜잭션은 데이터입니다. 트랜잭션이 모여있는 블록 역시 데이터입니다. 다시 말해, 전부 데이터입니다. 이 메타 데이터는 블록의 맨 윗 부분에 따로 두는데, 이러한 이유로 블록의 메타 데이터를 블록 헤더(Header)라고 부르기도 합니다.

> 헤더(Header)안의 **메타데이터**에는 논스(Nonce)값이 있는데, 이 논스는 트랜잭션의 논스와는 다른 역할을 합니다. 자세한 설명은 다른 유닛에서 다루게 됩니다.

**트랜잭션(Transaction)**이란, **데이터베이스의 상태를 변환시키는 하나의 논리적 기능을 수행하기 위한 작업의 단위**라고 하며, 데이터베이스 트랜잭션이 안전하게 수행된다는 것을 보장하기 위한 성질을 가리키는 약어 **A.C.I.D**를 통해 트랜잭션의 특성을 알 수 있습니다.

  

트랜잭션은 쉽게 생각해서 은행 앱에서 쓰이는 이체 데이터와 같습니다. 우리가 은행 앱으로 어떤 사람에게 돈을 이체하고 싶은 경우를 생각해봅시다. 받을사람의 계좌번호, 금액 등의 정보를 작성하고 이체 버튼을 누릅니다. 은행 앱에서는 전산상에 해당 거래내역을 등록함으로써 거래가 정상적으로 이루어지게됩니다. 비트코인에서도 거래를 하기 위해선 보내는 주소, 받는 사람의 주소, 금액, 수수료 등의 정보를 작성해야하고, 이렇게 작성된 것이 바로 **트랜잭션 데이터**입니다.

블록체인에서의 트랜잭션 역시 **상호작용 및 작업 수행의 논리적 단위**입니다. 블록체인 상의 모든 활동은 트랜잭션을 통해 이루어지고, 추상적인 관점에서 트랜잭션은 **블록체인의 상태(State) 변화**시키는 일련의 작업을 내포하고 있습니다.

> 블록체인의 상태(State) 변화 예를 들어, 앨리스가 밥에게 $50를 송금을 하고자 한다면, 자신이 보유하고 있는 전체 금액에서 앨리스는 -$50, 밥은 +$50의 상태변화가 생깁니다.

\[블록체인 심화&트랜잭션-그림.1\] 블록체인의 트랜잭션 구조

  

비트코인과 이더리움의 트랜잭션 데이터 구조 차이
--------------------------

비트코인과 이더리움의 트랜잭션 데이터 구조는 각각 다음과 같고, 논스(Nonce)의 유무가 가장 큰 차이입니다.

### 비트코인 트랜잭션 구조

필드

설명

버전 번호

채굴자와 노드가 트랜잭션 처리에 사용할 규칙을 지정하는데 사용

입력 카운터

트랜잭션에 포함된 입력의 개수

입력 리스트

블록의 첫 트랜잭션은 코인베이스 트랜잭션(Coinbase Transaction).  
입력 리스트에는 하나 이상의 트랜잭션 입력이 포함

출력 카운터

출력의 개수를 나타내는 양의 정수

출력 리스트

트랜잭션에 포함된 출력

로크(Lock) 시간

트랜잭션이 유효해지는 가장 빠른 시간을 정의하는 필드

  

### 이더리움 트랜잭션 구조

필드

설명

논스(Nonce)

발신 EOA에 의해 발행되어 메시지 재사용을 방지하는데 사용되는 일련번호

가스 가격(Gas Price)

발신자가 지급하는 가스의 가격

가스 한도(Gas Limit)

이 트랜잭션을 위해 구입할 가스의 최대량

수신자(Recipient)

목적지 이더리움의 주소

값(Value)

목적지에 보낼 이더의 양

데이터(Data)

가변 길이 바이너리 데이터 페이로드

v, r, s

EOA의 ECDSA 디지털 서명의 세가지 구성 요소

  

이더리움 트랜잭션 **논스(Nonce)의 특징**은 2가지가 있습니다

*   거래 전송(Transaction)시 논스는 1씩 증가한다.
*   논스는 계정에서 유일하며, 동일한 논스가 존재하지 않는다.

논스(Nonce)는 발신 주소의 속성이며, 발신 주소의 컨텍스트 안에서만 의미를 갖습니다. 그러나 명시적으로 블록체인 계정 상태에 저장되지 않고 해당 주소에서 발생한 확인된 트랜잭션 건수를 세어서 동적으로 계산되는 값이 논스입니다. 논스는 중복되지 않고 순차적이기 때문에, 같은 논스에 여러 트랜잭션 전송이 발생하였다면 해당 논스 중 제일 높은 가스비(Gas Price)를 지불한 트랜잭션이 처리됩니다. 이더리움에서는 이러한 방법으로 이중 지불 문제를 방지합니다.

만약, 논스가 0인 트랜잭션 전송 후 논스가 2인 트랜잭션을 전송하면, 두 번째 트랜잭션은 어떤 블록에도 포함되지 않습니다. 이더리움 네트워크는 누락된 논스가 나타날 때까지 기다리는 동안 두 번째 논스를 **멤풀(Mempool)**에 저장합니다.

> **멤풀(Mempool)**이란, 아직 블록에 들어가지 않은 상태의 트랜잭션들이 어떤 공간에 있는 것을 의미합니다.

그 다음 논스가 1인 누락된 트랜잭션을 전송하면, 두 트랜잭션이 처리가 되고 블록에 포함합니다.

  

비트코인과 이더리움 논스(Nonce)의 유무 차이는 결국, **이중지불(Double Spending)의 방지**를 위해서 입니다.

> **이중지불(Double Spending)**이란 원본 파일에 저장된 가치를 지불한 뒤, 해당 파일을 복사하여 다른 사람에게 또 지불하는 것을 말한다.

모든 트랜잭션은 **일회성**입니다. 그래서 하나의 트랜잭션은 하나의 상태만 변화시킬 수 있습니다. 이 문제를 해결하기 위해 비트코인의 경우 UTXO(Unspent Transaction Outputs, 미사용 트랜잭션 출력값)을 통해 해결하고, 이더리움은 어카운트(Account)기반 시스템으로 논스(Nonce)값을 각 트랜잭션이 오직 한번만 처리되게 하는 카운터로 사용합니다. 즉, UTXO와 어카운트 기반의 프로토콜 차이 때문에 이더리움 트랜잭션의 논스가 있고, 이 논스는 트랜잭션을 발신한 사람이 트랜잭션에 필요한 메시지(이더리움 트랜잭션에 필요한 데이터) 재사용을 방지하기 위함입니다.

------

# 합의 알고리즘 
\*{-webkit-touch-callout:none;user-select:none;-moz-user-select:none;-ms-user-select:none;-webkit-user-select:none}

이번에는 합의 알고리즘의 종류가 무엇이 있는지 알아봅시다.

합의 알고리즘
-------

**합의 알고리즘(Consensus Algorithm)**이란, 다수의 참여자들이 통일된 의사결정을 하기 위해 사용하는 알고리즘을 말합니다. 합의 모델, 합의 방식, 합의 메커니즘 또는 합의 프로토콜이라고도 불립니다.

블록체인 시스템의 경우 네트워크에 참여하는 모든 참여자들이 동일한 데이터를 복사하여 분산 저장하기 때문에 원본과 사본의 구별이 없으며, 통일된 의사결정을 내릴 수 있는 권위 있는 중앙(Center)이 존재하지 않습니다.

다시 말해, 블록체인의 데이터는 중앙화된 서버 대신 전세계에 흩어져 있는 수많은 노드에 보관되기 때문에, 각각의 노드들은 블록에 기록하는 데이터가 위변조되지 않은 원본이라는 것이라는 것을 상호간에 합의하는 과정이 필요합니다. 만약 블록을 생성하는, 특정 노드가 악의를 품고 조작된 데이터를 저장하거나 네트워크에 전파한다면 시스템 전체의 신뢰도가 떨어질 것 입니다. 이런 악의적인 상황의 발생하더라도 네트워크를 올바른 방향으로 이끌고자하는 다수의 노드들이 상호 검증을 거쳐 올바른 블록 생성을 이끌어내는 프로세스와 알고리즘을 바로 합의(Consensus)라고 합니다.

  

### 작업 증명(PoW, Proof of Work)

![](https://s3.ap-northeast-2.amazonaws.com/urclass-images/p6hzSlEjjPLo8_A6Quu4n-1634703124954.png) \[블록체인 심화&합의 알고리즘-그림.1\] 작업 증명

작업 증명은 최초의 블록체인인 비트코인을 창시한 사토시 나카모토(Satoshi Nakamoto)가 제안한 합의 알고리즘으로, 블록생성 시간동안 가장 많은 해시파워를 제공한 노드가 블록을 생성할 수 있도록 설계가 되어있습니다. 이 기법은 비트코인, 라이트코인(Litecoin) 등 여러 암호화폐 블록체인에서 사용 됩니다.

블록을 생성하기 위해 논스(Nonce)라는 임의의 값을 맞히는 과정을 마이닝(Mining, 채굴)이라고 부르는데, 블록체인 네트워크에 전송된 암호화된 거래정보를 새로운 블록에 담고, 새로운 블록을 체인에 연결하는 작업을 완료했다는 것을 증명하는데 사용되는 컴퓨팅 파워라고 이해할 수 있습니다. 작업 증명에서는 브랜치가 생긴 경우 가장 긴 블록체인이 남을 때까지 서로 경쟁하여 이긴 브랜치가 최종적인 브랜치로 채택이 되며, 다른 브랜치는 버려집니다.

작업 증명은 현재 [시빌 공격(Sybil Attack)](http://wiki.hash.kr/index.php/%EC%8B%9C%EB%B9%8C%EA%B3%B5%EA%B2%A9)과 같은 블록체인 네트워크에 대한 각종 공격을 막을 수 있다고 증명된 유일한 알고리즘입니다.

그러나 작업 증명에도 단점이 있습니다. 가령, A, B, C가 동시에 채굴을 시작했고 C가 채굴에 성공했습니다. 만약 A와 B가 찾는 논스에 90% 근접했다고 하더라도, 지금 찾는 논스의 값을 계속 찾는 것보다는 새로운 블록을 채굴하는 게 더 효율적입니다. 따라서 채굴에 성공한 하나의 노드를 제외한 나머지 모든 노드들은 에너지 자원을 낭비할 뿐입니다. 이것이 작업 증명의 가장 큰 단점입니다.

PoW의 특징

장점

\- 현재 높은 시장 가치를 형성하고 있는 주류 코인들이 채택하고 있습니다.  
\- 강력한 보안성을 제공합니다.  
\- 서비스 남용을 쉽게 방지할 수 있습니다.

단점

\- 높은 전력 소모를 통해 자원을 낭비합니다.  
\- 지속적으로 해시파워를 유지해야 합니다.  
\- 특정 마이닝 세력의 해시 독점으로 인한 생태계 교란 우려가 있습니다.

  

### 지분 증명(PoS, Proof of Stake)

![](https://s3.ap-northeast-2.amazonaws.com/urclass-images/vMm30JAbbLwnnZk034IDT-1634703180226.png) \[블록체인 심화&합의 알고리즘-그림.2\] 지분 증명

지분 증명 알고리즘은 노드 또는 사용자가 시스템에 충분한 지분을 갖고 있다는 아이디어에서 출발합니다. 즉, PoS는 지분을 많이 가지고 있는 노드에게 블록을 생성할 권한을 줍니다. 작업이 아닌 더 많은 지분(해당 코인)을 가지고 있을 수록 그에 비례하여 블록에 기록할 권한이 더 많이 부여된다는 개념입니다.

채굴자에게는 마치 이자와 같은 방식으로 코인이 지급되며, 일정 수 이상의 코인을 보관하고 있는 지갑을 블록체인 네트워크에 연결시켜놓기만 하면 보상을 받을 수 있습니다. 블록 생성자와 지분 생성자의 이해관계를 일치시킴으로써 블록을 나쁜 의도로 생성할 동기부여를 없애며, 잘못 생성할 경우 패널티를 부여합니다.

PoW보다 에너지 소모가 적고, 코인을 가진 노드 누구나 네트워크에 허가없이 참여하기 때문에 분산화가 더 잘 되어 많은 노드가 의사결정 과정에 쉽게 참여할 수 있는 이점이 있습니다.

오늘날 **이더리움**은 작업 증명 방식에서 지분 증명 방식으로 합의 알고리즘을 변경하려 합니다.

PoS의 특징

장점

\- 해쉬파워가 많이 필요하지 않으므로 경제적이며 친환경적입니다.  
\- 블록 생산자의 탈중앙화로 안정성을 확보할 수 있습니다.  
\- 블록을 생성하기 위해 지분을 담보로 잡아야하기 때문에 Dumping을 방지할 수 있습니다.

단점

\- 아직 검증되지 않았기 때문에 보안성이 강한지 확인되지 않았습니다.  
\- 지분이 많은 고래들이 권력을 독점할 가능성이 존재합니다.

  

### 위임 지분 증명(DPoS. Delegated Proof of Stake)

![image](https://s3.ap-northeast-2.amazonaws.com/urclass-images/5rfhP549hg8ibIykWwjO6-1634703226832.jpeg) \[블록체인 심화&합의 알고리즘-그림.3\] 위임 지분 증명

위임 지분 증명은 PoS에서 변형된 것으로, 시스템의 지분을 가진 각 노드가 투표를 통해 트랜잭션의 유효성 검사를 다른 노드에 위임하여 증명하는 개념입니다. **이오스(EOS)**에서 사용이 됩니다.

> **이오스(EOS)**는 위임지분증명(DPoS) 방식을 사용하는 제3세대 암호화폐입니다.

모든 노드의 자격을 가진 주주들이 블록생성에 참여하는 대신, 네트워크의 모든 노드의 투표 결과로 선출한 '상위 노드'(스팀에서는 증인, Witness이라 함)에게 권한을 위임해 합의하도록 하는 방식입니다. 일정 수의 증인들(스팀은 20명, EOS는 21명)은 모든 권한을 위임 받아 블럭 생성을 담당합니다. 이는 미국 대선의 대의원 제도 같은 간접선거 방식에 비유할 수 있습니다.

댄 라리머는 DPoS 를 사용하는 그라핀(Graphene) 엔진을 토대로 스팀과 빗쉐어를 만들고 이에 대한 성능을 증명했습니다. DPoS는 합의에 참여하는 노드의 수가 한정되어 있기 때문에 매우 빠른 성능과 확장성을 보이고 있지만, 완전히 탈중앙화된 블록체인이 아니라는 비판을 받고 있기도 합니다.

DPoS의 특징

장점

\- POS에 비해 많은 트랜잭션을 빠르게 처리가능합니다.  
\- POW에 비해 비용이 낮습니다.  
\- 하드포크의 위험이 낮습니다.  
\- 증인들이 투표에 참여할 인센티브가 분명합니다.

단점

\- 증인끼리 손쉽게 담합할 위험이 있습니다.  
\- 공개된 소수의 증인에 대한 디도스(DDoS) 공격 위험이 있습니다.

  

### 비잔틴 장애 허용(BFT. Byzantine Fault Tolerance)

비잔틴 장애 허용(BFT. Byzantine Fault Tolerance)이란, 장애가 있더라도 전체의 3분의 1을 넘지 않는다면, 시스템이 정상 작동하도록 허용하는 합의 알고리즘입니다. 블록체인의 분산원장 체계가 제대로 돌아가기 위해서는 원장을 공유하는 참여자들이 정직하게 행동해야 하며 이를 보장할 방법이 있어야 합니다. 만약 악의적인 노드가 존재하여 누군가 속이려 들더라도 모두가 지닌 원장은 같은 내용을 유지해야 하는 방법 또한 존재해야 하는데, 이런 골칫거리가 비잔틴 장군의 문제입니다. 자세한 개념은 다른 콘텐츠에서 상세히 설명합니다.

### 프랙티컬 비잔틴 장애 허용(PBFT. Practical Byzantine Fault Tolerance)

프랙티컬 비잔틴 장애 허용(PBFT, Practical Byzantine Fault Tolerance)은 네오, 질리카, 하이퍼레저, R3, ITC, 텐더민트 등에서 사용하는 합의 알고리즘입니다. 이 기술은 여러 노드로 구성된 네트워크에서 악의적 공격을 방어하기 위해 만들어졌습니다. 자세한 개념은 다음 유닛에서 상세히 설명합니다.

  

합의 알고리즘의 종류와 장단점
----------------

위의 합의 알고리즘 이외에도 다양한 합의 알고리즘이 있으며, 각 합의 알고리즘은 그에 맞는 장단점을 가지고 있습니다.

체인 공개 유형

합의 방식

설명

장점

단점

사용 코인

퍼블릭 비허가형 공개형

작업 증명 PoW

각 노드의 연산 능력을 증명하여 블록 생성 높은 컴퓨팅 파워를 가진 노드가 블록을 생성할 확률이 높음 오랫동안 사용되며 안전성이 검증되었지만 단점도 많이 도출

오랫동안 검증됨

51% Attack 완결성 문제 느린 트랜잭션 에너지 낭비

비트코인 라이트코인

지분 증명 PoS

소유 지분 양에 비례하여 블록 생성 권한을 높은 확률로 부여 받음 많은 지분을 가진 노드가 블록을 생성할 확률 높음 이론적으로 우수하지만 실제 대규모 환경에서 검증 사례가 부족

51% Attack 내성 빠른 트랜잭션 에너지 낭비 적음

완결성 문제 검증 부족

퀀텀 네오 스트라디스

위임 지분 증명 DPoS

일부 위임된 Validator끼리 PoS 수행 트랜잭션 속도가 더 빠름 신뢰도는 Validator의 신뢰도에 종속

빠른 트랜잭션 에너지 낭비 적음

완전성 문제 검증 부족 탈중앙성 부족 보안 취약

스팀 이오스 아크 라이즈

경과 시간 증명 PoET

경쟁적 연산으로 낭비되는 에너지를 줄이면서 작업 증명과 유사 효과 하이퍼레저 쏘투스 레이크(Sawtooth Lake)에서 제안 인텔 SGX을 기반으로 블록을 생성하는 리더를 랜덤으로 선정

검증된 방법의 개선 에너지 낭비 적음

특정 HW 종속

쏘투스

프라이빗 허가형 컨소시엄

PBTF

참가자 1명이 프라이머리(리더)가 되어 모든 참가자에게 요청 송신 그 요청에 대한 결과를 집계한 뒤 다수의 값을 사용해 블록을 확정 각 노드는 브로드캐스트 된 명령을 받게 되면 모든 노드에 회신 각 노드는 명령을 일정 수 이상 수신하면 명령을 실행하고 블록을 등록

완결성 문제 해결 빠른 트랜잭션

참여자 사전 파악 필요 참가자 증가 시 성능 하락

페브릭

권한 증명 PoA

트랜잭션 및 블록의 Validator라고 승인된 계정에 의해 유효성이 검사 Validator의 권리를 얻으므로 그들이 얻은 지위를 유지하고자 함 자신의 신원에 부정적 평판이 생기길 원치 않도록 노력할 거라 가정

PAXOS

트랜잭션 및 블록의 Validator라고 승인된 계정에 의해 유효성이 검사 Validator가 될 수 있는 권리를 얻으므로 그들이 얻은 지위를 유지하고자 함 자신의 신원에 부정적인 평판이 생기길 원치 않도록 노력할 것이라 가정

RAFT

리더를 선정한 후 시스템의 모든 변화를 리더를 통해 결정 신뢰된 네트워크에서만 사용

리더의 조작 가능 BTF 보장하지 않음

Sieve

IBM에서 고안한 PBFT 확장 알고리즘 실행결과 전송과 집계 결과 전송으로 흐름이 나뉜다.


# 지갑과 어카운트

<div class="markdown-body"><p>이번 콘텐츠는 다음의 질문에 대한 답변과 이외에 어떤 부분을 더 고민하고, 이해해야 하는지 파악하길 추천합니다. 답변에 대한 추가질문을 상상하면서 학습하면 더욱 도움이 됩니다.</p><h2>Question</h2><ul><li>퍼블릭 블록체인, 프라이빗 블록체인, 컨소시움 블록체인의 차이점은 무엇인가요? 또 하이브리드 블록체인이라고 하는것은 무엇인가요?</li><li>프라이빗 블록체인인 하이퍼렛져 패브릭에서는 왜 UTXO를 사용할까요?</li><li>하이퍼레저와 블록체인의 차이는 무엇인가요?</li><li>왜 블록체인 네트워크들이 서로 다른 합의 알고리즘을 사용하나요?</li><li>일반적인 원장과 블록체인 원장의 차이점은?</li><li>이더리움에서 트랜잭션 Nonce가 필수인 이유는? 비트코인은 왜 트랜잭션 Nonce가 없나요?</li><li>비트코인에서 트랜잭션 검증은 어떻게 이루어 지나요?</li><li>이더리움에서 트랜잭션 검증은 어떻게 이루어 지나요?</li><li>PoW와 PoS의 가장 큰 차이점은 무엇이라고 생각하나요?</li><li>DPoS는 무엇인가요?</li><li>PBFT는 무엇인가요?</li><li>이더리움에서 주소를 Public Key 자체가 아니라, 이더리움 경우 20byte로 줄여서 사용하는 이유는 무엇인가요 장점은? 줄여진 주소를 가지고 서명을 어떻게 확인 하나요?</li><li>UTXO 기반의 블록체인과 어카운트 기반의 블록체인의 차이점과 장단점은 무엇인가요?</li><li>비트코인에서 UTXO는 무엇인가요?</li><li>비트코인은 어떤 언어로 이루어져 있나요? 이더리움은 어떤 언어로 이루어져 있나요?</li><li>비트코인 블록체인과 이더리움 블록체인의 차이는 무엇인가요?</li></ul><h2>블록체인 네트워크 유형</h2><center><table><thead><tr><th style="text-align: center;">구분</th><th style="text-align: center;">퍼블릭 블록체인(Public Blockchain)</th><th style="text-align: center;">프라이빗 블록체인(Private Blockchain)</th><th style="text-align: center;">컨소시엄 블록체인(Consortium Blockchain)</th></tr></thead><tbody><tr><td style="text-align: center;">관리자</td><td style="text-align: center;">모든 거래 참여자</td><td style="text-align: center;">한 중앙 기관이 모든 권한 보유</td><td style="text-align: center;">컨소시엄에 소속된 참여자</td></tr><tr><td style="text-align: center;">거버넌스</td><td style="text-align: center;">한번 정해진 법칙을 바꾸기 매우 어려움</td><td style="text-align: center;">중앙 기관의 의사결정에 따라 용이하게 법칙을 바꿀 수 있음</td><td style="text-align: center;">컨소시엄 참여자들의 합의에 따라 법칙을 바꿀 수 있음</td></tr><tr><td style="text-align: center;">거래속도</td><td style="text-align: center;">네트워크 확장이 어렵고 거래 속도가 느림</td><td style="text-align: center;">네트워크 확장이 매우 쉽고 거래 속도가 빠름</td><td style="text-align: center;">네트워크 확장이 쉽고 거래 속도가 빠름</td></tr><tr><td style="text-align: center;">데이터 접근</td><td style="text-align: center;">누구나 접근 가능</td><td style="text-align: center;">허가 받은 사용자만 접근 가능</td><td style="text-align: center;">허가 받은 사용자만 접근 가능</td></tr><tr><td style="text-align: center;">식별성</td><td style="text-align: center;">익명성</td><td style="text-align: center;">식별 가능</td><td style="text-align: center;">식별 가능</td></tr></tbody></table></center><br><h2>분산원장기술</h2><p>분산원장(Distributed Ledger)은 거래 정보를 기록한 원장을 특정 기관의 중앙화된 서버가 아닌 분산화된 네트워크에서 참여자들이 공동으로 기록 및 관리하는 기술로 공유원장 또는 분산원장기술(DLT; Distributed Ledger Technology).</p><p>중앙집중원장(Centralized Ledger)의 비용문제, 시간문제, 보안문제를 해결.</p><p>분산원장기술의 장점은 중앙 집중형 방식에 비해 높은 효율성, 시스템 안정성, 보안성, 투명성</p><br><h2>트랜잭션</h2><p>블록체인에서의 트랜잭션은 상호작용 및 작업 수행의 논리적 단위입니다. 블록체인 상의 모든 활동은 트랜잭션을 통해 이루어지고, 추상적인 관점에서 트랜잭션은 블록체인의 상태(State) 변화를 야기하는 일련의 작업을 내포하고 있습니다.</p><br><h2>비트코인 트랜잭션 구조</h2><center><table><thead><tr><th style="text-align: center;">필드</th><th style="text-align: center;">설명</th></tr></thead><tbody><tr><td style="text-align: center;">버전 번호</td><td style="text-align: center;">채굴자와 노드가 트랜잭션 처리에 사용할 규칙을 지정하는데 사용</td></tr><tr><td style="text-align: center;">입력 카운터</td><td style="text-align: center;">트랜잭션에 포함된 입력의 개수</td></tr><tr><td style="text-align: center;">입력 리스트</td><td style="text-align: center;">블록의 첫 트랜잭션은 코인베이스 트랜잭션(Coinbase Transaction). 입력 리스트에는 하나 이상의 트랜잭션 입력이 포함</td></tr><tr><td style="text-align: center;">출력 카운터</td><td style="text-align: center;">출력의 개수를 나타내는 양의 정수</td></tr><tr><td style="text-align: center;">출력 리스트</td><td style="text-align: center;">트랜잭션에 포함된 출력</td></tr><tr><td style="text-align: center;">로크(Lock) 시간</td><td style="text-align: center;">트랜잭션이 유효해지는 가장 빠른 시간을 정의하는 필드</td></tr></tbody></table></center><br><h2>이더리움 트랜잭션 구조</h2><center><table><thead><tr><th style="text-align: center;">필드</th><th style="text-align: center;">설명</th></tr></thead><tbody><tr><td style="text-align: center;">논스(Nonce)</td><td style="text-align: center;">발신 EOA에 의해 발행되어 메시지 재사용을 방지하는데 사용되는 일련번호</td></tr><tr><td style="text-align: center;">가스 가격(Gas Price)</td><td style="text-align: center;">발신자가 지급하는 가스의 가격</td></tr><tr><td style="text-align: center;">가스 한도(Gas Limit)</td><td style="text-align: center;">이 트랜잭션을 위해 구입할 가스의 최대량</td></tr><tr><td style="text-align: center;">수신자(Recipient)</td><td style="text-align: center;">목적지 이더리움의 주소</td></tr><tr><td style="text-align: center;">값(Value)</td><td style="text-align: center;">목적지에 보낼 이더의 양</td></tr><tr><td style="text-align: center;">데이터(Data)</td><td style="text-align: center;">가변 길이 바이너리 데이터 페이로드</td></tr><tr><td style="text-align: center;">v, r, s</td><td style="text-align: center;">EOA의 ECDSA 디지털 서명의 세가지 구성 요소</td></tr></tbody></table></center><br><h2>이더리움 트랜잭션 논스(Nonce)의 특징 2가지</h2><ul><li>거래(Transaction)를 전송시 논스는 1씩 증가한다.</li><li>논스는 계정에서 유일하며, 동일한 논스가 존재 하지않는다.</li></ul><p>비트코인과 이더리움 논스(Nonce)의 유무 차이는 이중지불(Double Spending)의 방지를 위해서 입니다.</p><br><h2>노드(Node)</h2><p>P2P로 연결되어 블록 체인 네트워크에 연결된 모든 블록 정보를 가지는 각각의 서버를 노드(Node)라고 합니다.</p><br><h2>노드의 종류</h2><ul><li>풀 노드 : 모든 기능을 다 가지고 있는 노드</li><li>라이트 노드 : 모든 블록정보의 원본을 가지고 있지 않고 일종의 요약본 즉 헤더정보만 가지고 있는 노드</li></ul><br><h2>채굴(Mining)</h2><p>채굴(Mining)이란, 암호화폐의 거래내역을 기록한 블록을 생성하고 그 대가로 암호화폐를 얻는 행위</p><br><h2>채굴(Mining)이 필요한 이유</h2><p>블록체인 네트워크를 유지시키기 위해서 필요합니다.
거래 내역을 기록하고 기록된 거래내역을 블록에 담아 사용자들에게 전파하는 역할을 수행하고, 추가적으로 전파된 블록이 진짜인지 거짓인지에 대한 검증을 수행</p><br><h2>합의 알고리즘</h2><p>합의 알고리즘(Consensus Algorithm)이란, 다수의 참여자들이 통일된 의사결정을 하기 위해 사용하는 알고리즘</p><br><h2>작업 증명(PoW. Proof of Work)</h2><p>작업 증명 합의 메커니즘은 네트워크에서 수용할 값을 제안하기 전에 충분한 컴퓨팅 자원을 소모했다는 증명</p><br><h2>지분 증명(PoS. Proof of Stake)</h2><p>지분 증명 알고리즘은 노드 또는 사용자가 시스템에 충분한 지분을 갖고 있다는 증명</p><br><h2>위임 지분 증명(DPoS. Delegated Proof of Stake)</h2><p>시스템의 지분을 가진 각 노드는 투표를 통해 트랜잭션의 유효성 검사를 다른 노드에 위임하여 증명</p><br><h2>프랙티컬 비잔틴 장애 허용(PBFT. Practical Byzantine Fault Tolerance)</h2><p>프랙티컬 비잔틴 장애 허용(PBFT, Practical Byzantine Fault Tolerance)은 네오, 질리카, 하이퍼레저, R3, ITC, 텐더민트 등에서 사용하는 합의 알고리즘. 
여러 노드로 구성된 네트워크에서 악의적 공격을 방어하기 위해 만들어졌습니다.</p><br><h2>지갑(Wallet)</h2><p>비트코인, 이더리움 등의 암호화폐를 보관할 수 있는 계정</p><br><h2>지갑의 종류</h2><ul><li>데스크탑(PC)지갑</li><li>모바일 지갑</li><li>하드웨어 지갑</li><li>웹 지갑</li></ul><br><h2>지갑의 구조</h2><p>주소(공개 키. Public Key)와 암호(개인 키. Private Key)로 구성</p><br><h3>어카운트(Account)</h3><p>이더리움 주소(Address)와 개인키(Private Key)의 조합을 어카운트(Account)이라고 합니다.</p><br><h2>이더리움의 2가지 유형 계정</h2><ul><li>외부 소유 계정(EOA)</li><li>컨트랙트 계정(CA)</li></ul><br><h2>어카운트의 장단점</h2><ul><li>장점 : 단순성, 효율성</li><li>단점 : 이중 지불</li></ul><br><h2>UTXO(Unspent Transaction Outputs)</h2><p>UTXO(Unspent Transaction Outputs)는 미사용 트랜잭션 출력값(미지출 거래 출력)을 뜻합니다.
코인이 지갑(Wallet)에 저장되는 것이 아니라, UTXO(Unspent Transaction Outputs)에 저장.</p><br><h2>UTXO의 장단점</h2><ul><li>장점 : 이중 지불 방지, 잔고의 증명</li><li>단점 : UTXO가 너무 과하게 생성이 될 경우 불필요한 수수료를 내야 하는 단점</li></ul><br><h2>비트코인과 이더리움 비교</h2><p>화폐의 역할에 충실해야 한다면 비트코인의 UTXO가 한번 사용되고 사라져 익명성과 보안성이 강하기 때문에 더 훌륭하지만, dApp과 같이 다양한 기능을 구현하고 싶다면 스마트 컨트랙트를 활용할 수 있는 이더리움의 어카운트가 좋습니다.</p><br><h2>Geth</h2><p>Geth는 이더리움 재단(Ethereum Foundation)이 제공하는 공식 클라이언트 소프트웨어로써, Go언어로 개발.</p><br><h2>Parity</h2><p>패리티(Parity)는 이더리움 프로토콜의 또 다른 구현체이며, 러스트(Rust) 프로그래밍 언어로 개발.</p><br><h2>비트코인 개발 언어</h2><p>비트코인은 다양한 언어로 개발되었고, C++이 주 언어.</p><br><h2>블록체인의 거버넌스(Governance)</h2><p>블록체인 네트워크를 유지하기 위해서는 구성원들간의 이해관계 조정하는 커뮤니티입니다.</p><br><h2>BIP / EIP / ERC / KIP</h2><ul><li>BIP(Bitcoin Improvement Proposal)는 비트코인의 개선 제안을 의미</li><li>EIP(Ethereum Improvement Proposal)는 이더리움의 개선 제안을 의미</li><li>ERC(Ethereum Request for Comment)는 이더리움의 표준이 될 만한 내용입니다.</li><li>KIP(Klaytn Improvement Proposals)는 클레이튼의 개선 제안을 의미</li></ul></div>